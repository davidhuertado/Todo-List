(()=>{"use strict";const t={projectsArray:[],projectUl:document.querySelector(".projects-ul"),createAddProject(){const t=document.getElementById("project").value;return""===t||t.length<2?(document.getElementById("project").value="",-1):new class{constructor(t){this.title=t,this.tasks=[],this.display=!1,this.taskDisplayed=!1}}(t)},isTheSameProjectName:(t,e)=>t.title===e},e={taskDisplayed:!1,createTask(){const t=document.getElementById("task").value,e=document.getElementById("date").value;return""===t||t.length<2?(document.getElementById("task").value="",document.getElementById("date").value="",-1):new class{constructor(t,e){this.title=t,this.date=e,this.checked=!1}}(t,e)},pushTaskInProject(e){const n=document.querySelector(".project-todo-title").textContent,s=t.projectsArray.findIndex((t=>t.title===n));t.projectsArray[s].tasks.push(e)}},n={displayProjects(t){t.projectsArray.forEach((e=>{if(!e.display){e.display=!0;const n=document.createElement("li");n.classList.add("nav-item");const s=document.createElement("a");s.classList.add("nav-link","project-name"),s.textContent=e.title,s.href="#",document.getElementById("project").value="",n.appendChild(s),t.projectUl.appendChild(n)}}))},displayTask(t){const e=document.querySelector(".big-todos-containers"),n=document.createElement("div");n.classList.add("tasks-containers","row"),e.appendChild(n);const s=document.createElement("div");s.classList.add("left-task","col-6","d-flex","justify-content-start","align-items-center"),n.appendChild(s);const c=document.createElement("div");c.classList.add("right-task","col-6","d-flex","justify-content-end","align-items-center"),n.appendChild(c);const a=document.createElement("div");if(a.classList.add("d-flex","align-items-center"),c.appendChild(a),""!==t.date){const e=document.createElement("h4"),n=t.date.split("-");e.textContent=`${n[2]} - ${n[1]}`,e.classList.add("task-date"),a.appendChild(e),document.getElementById("date").value=""}const o=document.createElement("div");!0===t.checked?o.classList.add("checkbox","col-6","checked"):o.classList.add("checkbox","col-6"),s.appendChild(o);const d=document.createElement("div");d.classList.add("task-name","col-6","d-flex","align-items-center"),s.appendChild(d),d.textContent=t.title,document.getElementById("task").value="";const r=document.createElement("button");r.classList.add("btn","btn-danger","btn-sm","d-flex","align-items-center","delete-btn"),r.textContent="Delete",c.appendChild(r)}},s=document.getElementById("save-project"),c=document.querySelector(".projects-ul"),a=document.getElementById("save-task"),o=document.querySelector(".big-todos-containers");a.addEventListener("click",(function(){if(0===t.projectsArray.length)return alert("You have to create a project.");const s=e.createTask();if(-1===s)return alert("You have to enter a valid task name. 2 characters minimum");e.pushTaskInProject(s),n.displayTask(s)})),s.addEventListener("click",(function(){const e=t.createAddProject();if(-1===e)return alert("You have to enter a valid project name. 2 characters minimum");t.projectsArray.push(e),n.displayProjects(t)})),c.addEventListener("click",(function(s){if(s.target.classList.contains("project-name")){if(!0===e.taskDisplayed){const e=document.querySelector(".project-todo-title").textContent;t.projectsArray.find((t=>t.title===e)).taskDisplayed=!1}const c=s.target.textContent,a=function(t){return t.title===c},o=t.projectsArray.findIndex(a);document.querySelector(".project-todo-title").textContent=t.projectsArray[o].title,t.projectsArray[o].taskDisplayed=!0;const d=document.querySelector(".big-todos-containers");for(;d.firstChild;)d.removeChild(d.firstChild);for(let e=0;e<t.projectsArray[o].tasks.length;e++)n.displayTask(t.projectsArray[o].tasks[e]);e.taskDisplayed=!0}})),o.addEventListener("click",(function(e){if(e.target.classList.contains("checkbox")){e.target.classList.toggle("checked");const n=e.target.nextElementSibling.textContent,s=t.projectsArray.find((t=>!0===t.taskDisplayed)).tasks.find((t=>t.title===n));!0===s.checked?s.checked=!1:s.checked=!0}})),o.addEventListener("click",(function(e){if(e.target.classList.contains("delete-btn")){const n=e.target.parentElement.parentElement.firstChild.lastChild.textContent;console.log(n);const s=function(t){return!0===t.taskDisplayed},c=t.projectsArray.find(s),a=c.tasks.findIndex((t=>t.title===n));c.tasks.splice(a,1),e.target.parentElement.parentElement.remove(),console.log(c.tasks)}}))})();